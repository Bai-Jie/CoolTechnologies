<!DOCTYPE html>
<!-- used by PlayVideoActivity -->
<html lang="zh">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no"/>
    <title>播放视频</title>
    <style>
        * {
        padding: 0;
        margin: 0;
        }
        html, body, #youkuplayer {
        width: 100%;
        height: 100%;
        }
    </style>
    <script type="text/javascript">
    var onPlayerReady = function() {
        // 点击全屏按钮时，触发全屏切换事件。目前在KITKAT(4.4)以上才添加webAppFullscreenToggleSwitch接口。
        if (typeof webAppFullscreenToggleSwitch === 'object' &&
        typeof webAppFullscreenToggleSwitch.toggleFullscreen === 'function') {
            document.getElementsByClassName("x-fullscreen")[0].addEventListener("click", function(){
                webAppFullscreenToggleSwitch.toggleFullscreen();
            });
        }
    };
    var onPlayStart = function() {
        //TODO bug:因为YKU.Player的onPlayStart事件实际上在按下（加载player后第一次播放前屏幕中央的）播放按钮时发生，而不是真的在开始第一次播放前发生，所以总是在PlayVideoActivity把pauseRequested设为true之前（按下播放按钮时）就运行到这了，所以目前pauseRequested状态变量 **无效**
        //BUG重现方法：初始化播放器后第一次播放前，点击播放按钮再（在正式播放前）按HOME按钮，回到主屏，YKU.Player仍会在后台播放
        if (webAppInterface.isPauseRequested()) {
            player.pauseVideo();
            //webAppInterface.onAcceptPauseRequest();
        }
    }
    </script>
</head>

<body>
<div id="youkuplayer"></div>
<script type="text/javascript" src="http://player.youku.com/jsapi"></script>
<script type="text/javascript">
player = new YKU.Player('youkuplayer', {
    styleid: webAppInterface.getStyleId(),
    client_id: webAppInterface.getClientId(),
    vid: webAppInterface.getVid(),
    autoplay: webAppInterface.isAutoplay(),
    show_related: webAppInterface.isShowRelated(),
    events: {
        onPlayerReady: onPlayerReady,
        onPlayStart: onPlayStart
    }
});
</script>

</body>

</html>
